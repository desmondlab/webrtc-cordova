<!-- add cache-view="false" to not save the cache -->
<ion-view cache-view="false" view-title="視像翻譯">
  <ion-content>


    <!-- <div class="main_video hidden j_main_video" style="width: 100%; height: 100%; position: absolute;"> -->
        <div class="main_video hidden j_main_video" style="width: 70%;">  
        <div class="main_video__timer hidden" id="timer">
        </div>

        <!-- <video id="main_video" class="j-main_video_vid" style="width: 50%; height: 100%;" autoplay> -->
            <video id="main_video" class="j-main_video_vid" style="width: 50%;" autoplay> 
        </video>
    </div>

    <!-- video chat description view -->
    <div id="description_view" class="j-description hidden">
        <div style="width: 100%;">
            <p class="video_chat_description">You will go to a camera clarification page first to see if your camera position is good. Then you can call the other side.</p>
        </div>
        <div style="width: 100%; text-align: center; margin-top: 73px;">
            <button class="j-next-btn">OK and GO</button>
        </div>
    </div>    

    <!-- camera perview -->
    <div id="camera_preview" class="j-preview-camera hidden">

        <div style="width: 100%; height: 100%; text-align: center;">
            <img src="img/camera_rect.png" style="width: 100%; height: 80%; top: -44px;"/>
            
            <button class="bnt_start_chat" style="">Start video chat</button>
        </div>

        <video id="camera_show" class="" style="width: 100%; height: 100%;" autoplay>
        </video>

    </div>

    <div class="wrapper j-wrapper header_section">
        <aside class="msg_board hidden" id="msg_board"></aside>

        <main class="main j-main">
           
        </main>

        <!-- SOUNDS -->
        <audio id="callingSignal" loop preload="auto">
            <source src="audio/calling.ogg"></source>
            <source src="audio/calling.mp3"></source>
        </audio>

        <audio id="ringtoneSignal" loop preload="auto">
            <source src="audio/ringtone.ogg"></source>
            <source src="audio/ringtone.mp3"></source>
        </audio>

        <audio id="endCallSignal" preload="auto">
            <source src="audio/end_of_call.ogg"></source>
            <source src="audio/end_of_call.mp3"></source>
        </audio>
    </div>

     <div style="z-index: 100; position: relative;">
        <aside class="users users_section">
            <h5 class="users__title j-users__title"></h5>

            <ul class="users__list j-users__list"></ul>
        </aside>

        <div class="pl j-pl hidden">
            <div class="clearfix" style="position: relative;">
                <div class="caller hidden j_caller_div" style="position: absolute; width: 150px; right: 10px; text-align: center;  top: 15px;">
                    <div style="z-index: 200;">
                        <button class="caller__call caller__call-hangup j-hangup hidden" style="z-index: 200;">End Call</button>
                    </div>

                    <div class="caller__inner">
                        <div class="caller__action">
                            <video id="localVideo" class="fw-video" autoplay>
                            </video>

                            <div id="calling_ctrl_index" class="caller__ctrl">
                                <button class="caller__ctrl_btn caller__ctrl_btn-cam j-caller__ctrl hidden" data-target="video">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" version="1.1">
                                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g transform="translate(-290.000000, -80.000000)">
                                          <g transform="translate(288.000000, 78.000000)">
                                            <path d="M0 0L24 0 24 24 0 24 0 0Z"/>
                                            <path class="svg_icon" d="M21 6.5L17 10.5 17 7C17 6.45 16.55 6 16 6L9.82 6 21 17.18 21 6.5 21 6.5ZM3.27 2L2 3.27 4.73 6 4 6C3.45 6 3 6.45 3 7L3 17C3 17.55 3.45 18 4 18L16 18C16.21 18 16.39 17.92 16.54 17.82L19.73 21 21 19.73 3.27 2 3.27 2Z"/>
                                          </g>
                                        </g>
                                      </g>
                                    </svg>
                                </button>

                                <button class="caller__ctrl_btn caller__ctrl_btn-mic j-caller__ctrl" data-target="audio" style="position: absolute; bottom: 120px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" version="1.1">
                                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g transform="translate(-347.000000, -80.000000)">
                                          <g transform="translate(344.000000, 78.000000)">
                                            <path d="M0 0L24 0 24 24 0 24 0 0Z"/>
                                            <path class="svg_icon" d="M19 11L17.3 11C17.3 11.74 17.14 12.43 16.87 13.05L18.1 14.28C18.66 13.3 19 12.19 19 11L19 11ZM14.98 11.17C14.98 11.11 15 11.06 15 11L15 5C15 3.34 13.66 2 12 2 10.34 2 9 3.34 9 5L9 5.18 14.98 11.17 14.98 11.17ZM4.27 3L3 4.27 9.01 10.28 9.01 11C9.01 12.66 10.34 14 12 14 12.22 14 12.44 13.97 12.65 13.92L14.31 15.58C13.6 15.91 12.81 16.1 12 16.1 9.24 16.1 6.7 14 6.7 11L5 11C5 14.41 7.72 17.23 11 17.72L11 21 13 21 13 17.72C13.91 17.59 14.77 17.27 15.54 16.82L19.73 21 21 19.73 4.27 3 4.27 3Z"/>
                                          </g>
                                        </g>
                                      </g>
                                    </svg>
                                </button>
                            </div>

                            <div class="caller__filter" style="display: none;">
                                <select class="caller__filter_select j-filter">
                                    <option value="no">No Filter</option>
                                    <option value="aden">Aden</option>
                                    <option value="reyes">Reyes</option>
                                    <option value="perpetua">Perpetua</option>
                                    <option value="inkwell">Inkwell</option>
                                    <option value="toaster">Toaster</option>
                                    <option value="walden">Walden</option>
                                    <option value="hudson">Hudson</option>
                                    <option value="gingham">Gingham</option>
                                    <option value="mayfair">Mayfair</option>
                                    <option value="lofi">Lofi</option>
                                    <option value="xpro2">Xpro2</option>
                                    <option value="_1977">1977</option>
                                    <option value="brooklyn">Brooklyn</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="callees j-callees" style="display: none;">
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div class="modal fade" id="error_no_calles" tabindex="-1">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Error</h4>
                </div>

                <div class="modal-body">
                    <p class="text-danger">請選擇登入角色（如翻譯員1）</p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="income_call" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <!-- <h4>Call from <strong class="j-ic_initiator"></strong></h4> -->
                    <h4>收到視訊通話請求</h4>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default j-decline">拒絶</button>
                    <button type="button" class="btn btn-primary j-accept">接受</button>
                </div>
            </div>
        </div>
    </div>


  </ion-content>
</ion-view>

